{"version":3,"file":"index.js","sources":["../src/js/utils/constants.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/utils/buttonService.js","../src/js/handlers/form.js","../src/main.js"],"sourcesContent":["const refs = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.js-load-more'),\n};\n\nconst API_KEY = '?key=49168840-e3c83c6477977e837e7a2b39b';\n\nexport { refs,  API_KEY };\n","import axios from 'axios';\nimport { API_KEY } from './utils/constants';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchFotoCard(query, page = 1) {\n  const params = {\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const { data } = await axios.get(`/${API_KEY}`, { params });\n\n  return data;\n}\n","export function createMarkupGalleryCards(cards) {\n  return cards\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <ul class=\"gallery-list\">\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Likes</p>\n                    <p class=\"gallery-info-value\">${likes}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Views</p>\n                    <p class=\"gallery-info-value\">${views}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Comments</p>\n                    <p class=\"gallery-info-value\">${comments}</p>\n                </li>\n                <li class=\"gallery-list-info\">\n                    <p class=\"gallery-info-name\">Downloads</p>\n                    <p class=\"gallery-info-value\">${downloads}</p>\n                </li>\n            </ul>\n        </a>\n    </li>\n        `\n    )\n    .join('');\n}\n","export class LoadMoreButton {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl) {\n    this.button = buttonEl;\n    this.prevText = '';\n  }\n\n  disable() {\n    this.button.disable = true;\n    this.prevText = this.button.textContent;\n    this.button.textContent = 'Loading...';\n  }\n\n  enable() {\n    this.button.disable = false;\n    this.button.textContent = this.prevText;\n  }\n\n  hide() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  show() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport { fetchFotoCard } from '../pixabay-api';\nimport { refs } from '../utils/constants';\nimport { createMarkupGalleryCards } from '../render-functions';\nimport { LoadMoreButton } from '../utils/buttonService';\n\nlet page = 1;\nlet userQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst loadMoreButton = new LoadMoreButton(refs.btnLoadMore);\n\nexport async function handlerSearch(ev) {\n  ev.preventDefault();\n\n  const form = ev.currentTarget;\n  userQuery = form.elements.user_query.value.trim();\n\n  if (userQuery === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  refs.loaderEl.classList.add('active');\n  page = 1;\n\n  try {\n    const data = await fetchFotoCard(userQuery, page);\n    refs.loaderEl.classList.remove('active');\n\n    if (!data.hits.length) {\n      refs.galleryEl.innerHTML = '';\n\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loadMoreButton.hide();\n      return;\n    }\n\n    refs.galleryEl.innerHTML = createMarkupGalleryCards(data.hits);\n    lightbox.refresh();\n\n    if (data.hits.length < data.totalHits) {\n      loadMoreButton.show();\n      loadMoreButton.button.addEventListener('click', handelLoadMore);\n    } else {\n      loadMoreButton.hide();\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handelLoadMore() {\n  page += 1;\n  loadMoreButton.disable();\n\n  try {\n    const data = await fetchFotoCard(userQuery, page);\n\n    if (!data.hits.length) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n      loadMoreButton.hide();\n      loadMoreButton.button.removeEventListener('click', handelLoadMore);\n\n      return;\n    }\n\n    refs.galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createMarkupGalleryCards(data.hits)\n    );\n    lightbox.refresh();\n    smoothScroll();\n\n    if (page * 15 >= data.totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n      loadMoreButton.hide();\n    } else {\n      loadMoreButton.enable();\n    }\n  } catch (err) {\n    console.log(err);\n    loadMoreButton.hide();\n  }\n}\n\nloadMoreButton.button.addEventListener('click', handelLoadMore);\n\nfunction smoothScroll() {\n  const card = document.querySelector('.gallery-card');\n  const height = card.getBoundingClientRect().height + 24;\n\n  window.scrollBy({\n    top: height * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n","import { refs } from './js/utils/constants';\nimport { handlerSearch } from './js/handlers/form';\n\nrefs.formEl.addEventListener('submit', handlerSearch);\n\n\n"],"names":["refs","API_KEY","axios","fetchFotoCard","query","page","params","data","createMarkupGalleryCards","cards","webformatURL","largeImageURL","tags","likes","views","comments","downloads","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton","userQuery","lightbox","SimpleLightbox","loadMoreButton","handlerSearch","ev","form","iziToast","handelLoadMore","err","smoothScroll","height"],"mappings":"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"}